<root> 
	<scripts>
		<include src="s2r://panorama/scripts/playertables/playertables_base.vjs_c" />
	</scripts>

	<script>
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_TOP_HEROES, false );     //Heroes and team score at the top of the HUD.
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_FLYOUT_SCOREBOARD, false );      //Lefthand flyout scoreboard.
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_TOP_MENU_BUTTONS, true );     //Top-left menu buttons in the HUD.
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_ENDGAME, false );      //Endgame scoreboard.    
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_TOP_BAR_BACKGROUND, false );     //Top-left menu buttons in the HUD.
		
		GameUI.SetDefaultUIEnabled( DotaDefaultUIElement_t.DOTA_DEFAULT_UI_ACTION_MINIMAP, true );

		GameUI.CustomUIConfig().team_colors = {}
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_GOODGUYS] = "#e721e0;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_BADGUYS ] = "#d43234;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_1] = "#e6ee02;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_2] = "#ff6c00;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_3] = "#3455ff;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_4] = "#74c01a;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_5] = "#815d36;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_6] = "#9223d2;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_7] = "#c7e40d;";
		GameUI.CustomUIConfig().team_colors[DOTATeam_t.DOTA_TEAM_CUSTOM_8] = "#8c2af4;";
		
		var hudElements = $.GetContextPanel().GetParent().GetParent().FindChildTraverse("HUDElements");
		
		
		
		
			var dotaHud = $.GetContextPanel().GetParent().GetParent().GetParent()
			var customUI = dotaHud.FindChildTraverse("PreGame")
			var heroSelection
				
			function OnStateChanged() {
				if ( Game.GameStateIs( DOTA_GameState.DOTA_GAMERULES_STATE_WAIT_FOR_PLAYERS_TO_LOAD ) ) {
					if (heroSelection == null) { 
						heroSelection = $.CreatePanel( "Panel", customUI, "customHeroSelection" )
						heroSelection.BLoadLayout( "file://{resources}/layout/custom_game/lia_hero_select_overlay.xml", false, false )
						heroSelection.style.visibility = "visible"

						customUI.FindChildTraverse("ConnectingLabelContainer").style.marginLeft = "1150px"
					}
				}
				else if ( Game.GameStateIs( DOTA_GameState.DOTA_GAMERULES_STATE_HERO_SELECTION ) ) {
					if (heroSelection == null) { 
						heroSelection = $.CreatePanel( "Panel", customUI, "customHeroSelection" )
						heroSelection.BLoadLayout( "file://{resources}/layout/custom_game/lia_hero_select_overlay.xml", false, false )
						heroSelection.style.visibility = "visible"
					}
				}
				else if ( Game.GameStateIs( DOTA_GameState.DOTA_GAMERULES_STATE_GAME_IN_PROGRESS ) ) {
					heroSelection.style.visibility = "collapse"
					heroSelection.DeleteAsync(0)
				}

			}
			GameEvents.Subscribe("game_rules_state_change", OnStateChanged);
		OnStateChanged()
		
		

		var topbar = hudElements.FindChildTraverse("topbar");
		topbar.style.width = "152px";
		topbar.style.marginRight = "1200px";

		var newUI = hudElements.FindChildTraverse("minimap_container");
		newUI.FindChildTraverse("GlyphScanContainer").style.visibility = "collapse";
	</script> 

	<Panel>
		<CustomUIElement type="Hud" layoutfile="file://{resources}/layout/custom_game/barebones_notifications.xml" /> 
		<CustomUIElement type="Hud" layoutfile="file://{resources}/layout/custom_game/barebones_attachments.xml" /> 
		<CustomUIElement type="Hud" layoutfile="file://{resources}/layout/custom_game/barebones_worldpanels.xml" />
		<CustomUIElement type="Hud" layoutfile="file://{resources}/layout/custom_game/selection.xml" />
		<CustomUIElement type="GameSetup" layoutfile="file://{resources}/layout/custom_game/team_select.xml" />
		
		<CustomUIElement type="GameInfo" layoutfile="file://{resources}/layout/custom_game/hudFix.xml" />
		
		<CustomUIElement type="GameInfo" layoutfile="file://{resources}/layout/custom_game/game_image.xml" />

		<CustomUIElement type="HudTopBar"           layoutfile="file://{resources}/layout/custom_game/multiteam_top_scoreboard.xml" />

		<CustomUIElement type="FlyoutScoreboard"    layoutfile="file://{resources}/layout/custom_game/multiteam_flyout_scoreboard.xml" />
		<CustomUIElement type="HeroSelection"       layoutfile="file://{resources}/layout/custom_game/multiteam_hero_select_overlay.xml" />
		<CustomUIElement type="EndScreen"           layoutfile="file://{resources}/layout/custom_game/multiteam_end_screen.xml" />
	</Panel>
</root>