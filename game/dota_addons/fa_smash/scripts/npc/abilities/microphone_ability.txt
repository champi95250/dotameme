	// MICROPHONE Ability by Champi
	// 2017
	// ----------------------------------------------
	// 001 - MICROPHONE
	//-----------------------------------------------
	"microphone_voice_scream"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_DIRECTIONAL | DOTA_ABILITY_BEHAVIOR_POINT"		   
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_NO"
		"AbilityUnitDamageType"			"DAMAGE_TYPE_PURE"	
		"FightRecapLevel"				"1"
		"AbilityTextureName"			"custom/microphone_voice_scream"

		// Precache
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"			"soundevents/game_sounds_heroes/game_sounds_queenofpain.vsndevts"
			"soundfile"			"soundevents/game_sounds_microphone.vsndevts"
			"particle"			"particles/microphone/sonic_wave.vpcf"
		}
		
		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"				"700"
		"AbilityCastPoint"				"0.452 0.452 0.452 0.452"

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"35 30 25 20"

		// Cost
		//-------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"				"75 100 125 150"

		// Special
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"			"FIELD_INTEGER"
				"starting_aoe"		"100"
			}
			"02"
			{
				"var_type"			"FIELD_INTEGER"
				"distance"			"900"
			}
			"03"
			{
				"var_type"			"FIELD_INTEGER"
				"final_aoe"			"450"
			}
			"04"
			{
				"var_type"			"FIELD_INTEGER"
				"speed"				"1100"
			}
			"05"
			{
				"var_type"			"FIELD_INTEGER"
				"damage"			"100 175 250 325"
			}
		}

		"OnSpellStart"
		{
			"FireSound"
			{
				"EffectName"	"Microphone.Cry"
				"Target"		"CASTER"
			}

			"LinearProjectile"
			{
				"Target"      "POINT"
				"EffectName"  "particles/microphone/sonic_wave.vpcf"
				"MoveSpeed"   "%speed"
				"StartRadius"   "%starting_aoe"
				"StartPosition" "attach_attack1"
				"EndRadius"     "%final_aoe"
				"FixedDistance" "%distance"
				"TargetTeams"   "DOTA_UNIT_TARGET_TEAM_ENEMY"
				"TargetTypes"   "DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
				"TargetFlags"   "DOTA_UNIT_TARGET_FLAG_NONE"
				"HasFrontalCone"    "1"
				"ProvidesVision" "0"
			}
		}

		"OnProjectileHitUnit"
		{
			"DeleteOnHit"	"0"
			"Damage"
			{
				"Target"	"TARGET"
				"Type"		"DAMAGE_TYPE_PURE"
				"Damage"	"%damage"
			}
		}

	}
	
	// Shut_up
	
	"microphone_shuup_i_singing"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"						"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_POINT"
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_NO"
		"FightRecapLevel"				"1"
		"AbilityTextureName"			"custom/microphone_shuup_i_singing"
		
		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"				"900"
		"AbilityCastPoint"				"0.4"

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"12"

		// Cost
		//-------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"				"75 80 85 90"

		// Special
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"			"FIELD_FLOAT"
				"wave_speed"		"2000.0"
			}
			"02"
			{
				"var_type"			"FIELD_INTEGER"
				"wave_range_tooltip"	"900"
			}
			"03"
			{
				"var_type"			"FIELD_INTEGER"
				"wave_width"		"250"
			}
			"04"
			{
				"var_type"			"FIELD_FLOAT"
				"silence_duration"	"3 4 5 6"
			}
			"05"
			{
				"var_type"			"FIELD_FLOAT"
				"knockback_distance_max"	"450 550 650 750"
			}
			"06"
			{
				"var_type"			"FIELD_FLOAT"
				"knockback_duration"		"0.6 0.7 0.8 0.9"
			}
			"07"
			{
				"var_type"			"FIELD_INTEGER"
				"knockback_height"		"0"
			}
		}
		
		// Data driven
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"				"soundevents/game_sounds_heroes/game_sounds_drowranger.vsndevts"
			"soundfile"					"soundevents/game_sounds_microphone.vsndevts"
			"particle"				"particles/units/heroes/hero_drow/drow_silence_wave.vpcf"
			"particle"				"particles/generic_gameplay/generic_silence.vpcf"
		}
		
		"OnSpellStart"
		{
			"LinearProjectile"
			{
				"Target"			"POINT"
				"EffectName"		"particles/units/heroes/hero_drow/drow_silence_wave.vpcf"
				"MoveSpeed"			"%wave_speed"
				"StartRadius"		"%wave_width"
				"StartPosition"		"attach_attack1"
				"EndRadius"			"%wave_width"
				"FixedDistance"		"%wave_range_tooltip"
				"TargetTeams"		"DOTA_UNIT_TARGET_TEAM_ENEMY"
				"TargetTypes"		"DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_HERO"
				"TargetFlags"		"DOTA_UNIT_TARGET_FLAG_NONE"
				"HasFrontalCone"	"0"
			}
			
			"FireSound"
			{
				"EffectName"		"Hero_DrowRanger.Silence"
				"Target"			"CASTER"
			}
		}
		
		"OnProjectileHitUnit"
		{
			"DeleteOnHit"			"0"
		
			"ApplyModifier"
			{
				"ModifierName"		"modifier_wave_of_silence_debuff_datadriven"
				"Target"			"TARGET"
			}
			
			"RunScript"
			{
				"ScriptFile"		"spell/microphone/microphone_silence.lua"
				"Function"			"modifier_wave_of_silence_knockback"
				"height"			"%knockback_height"
				"duration"			"%knockback_duration"
				"distance"			"%knockback_distance_max"
				"range"				"%wave_range_tooltip"
			}
		}
		
		"Modifiers"
		{
			"modifier_wave_of_silence_debuff_datadriven"
			{
				"Duration"			"%silence_duration"
				
				"EffectName"			"particles/generic_gameplay/generic_silence.vpcf"
				"EffectAttachType"		"follow_overhead"
				
				"States"
				{
					"MODIFIER_STATE_SILENCED"	"MODIFIER_STATE_VALUE_ENABLED"
				}
			}
		}
	}
	
	// Ultrasound
	
	"microphone_ultrasound"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_PASSIVE | DOTA_ABILITY_BEHAVIOR_AURA"
		"AbilityUnitTargetTeam"			"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_YES"
		"AbilityTextureName"			"custom/microphone_ultrasound"
		
		
		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"				"650 700 750 800"

		"AbilitySpecial"
		{
			"01"
			{
				"var_type"			"FIELD_INTEGER"
				"aura_radius"		"650 700 750 800"		// If you change this, also change the AbilityCastRange above
			}
			"02"
			{
				"var_type"			"FIELD_FLOAT"
				"aura_damage"		"-0.4 -0.8 -1.2 -1.6" 
			}
			"03"
			{
				"var_type"			"FIELD_FLOAT"
				"aura_damage_interval"		"0.25" 
			}
		}

		"Modifiers"
		{
			"modifier_heartstopper_aura_datadriven"
			{
				"Passive"		"1"
				"IsHidden"		"1"

				"Aura" 			"modifier_heartstopper_debuff_datadriven"
				"Aura_Radius" 	"%aura_radius"
				"Aura_Teams" 	"DOTA_UNIT_TARGET_TEAM_ENEMY"
				"Aura_Types" 	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
				"Aura_Flags"	"DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
			}

			"modifier_heartstopper_debuff_datadriven"
			{
				"IsDebuff"	"1"
				"IsHidden"	"1"

				"ThinkInterval"	"%aura_damage_interval"

				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile"			"spell/microphone/microphone_aura.lua"
						"Function"				"HeartstopperAura"

						"visibility_modifier"	"modifier_heartstopper_debuff_visibility"
					}
				}

				"OnDestroy"
				{
					"RemoveModifier"
					{
						"ModifierName"	"modifier_heartstopper_debuff_visibility"
						"Target" 		"TARGET"
					}
				}
			}

			"modifier_heartstopper_debuff_visibility"
			{
				"IsDebuff"		"1"
				"IsHidden"		"0"
				"IsPurgable" 	"0"
				"Passive"		"0"
			}
		}
	}
	// Ultimate Song_complete
	
	"microphone_song_complete"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityType"					"DOTA_ABILITY_TYPE_ULTIMATE"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET"
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_NO"
		"FightRecapLevel"				"2"
		"AbilityTextureName"			"custom/microphone_song_complete"

		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastPoint"				"0.8"
		"AbilityCastRange"				"1250 1250 1250"

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"160.0 130.0 100.0"

		// Cost
		//-------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"				"100 150 200"
		
		// Special
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"					"FIELD_INTEGER"
				"radius"					"1150 1250 1350"
			}
			"02"
			{
				"var_type"					"FIELD_FLOAT"
				"duration"					"7.0 7.0 7.0"
			}
			"03"
			{
				"var_type"					"FIELD_FLOAT"
				"animation_rate"				"2.55 2.55 2.55"
			}
			// Extra variables
			"04"
			{
				"var_type"					"FIELD_FLOAT"
				"song_duration"				"15"
			}
		}

		// Data driven
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"					"soundevents/game_sounds_microphone.vsndevts"
			"particle"					"particles/units/heroes/hero_siren/naga_siren_siren_song_cast.vpcf"
			"particle"					"particles/units/heroes/hero_siren/naga_siren_siren_song_end.vpcf"
			"particle"					"particles/microphone/song_aura.vpcf"
			"particle"					"particles/units/heroes/hero_siren/naga_siren_song_debuff.vpcf"
		}

		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile"			"spell/microphone/microphone_song.lua"
				"Function"				"StartSinging"
				"sub_ability_name"		"microphone_song_complete_stop"
			}
		}

		"OnUpgrade"
		{
			"RunScript"
			{
				"ScriptFile"	"spell/microphone/microphone_song.lua"
				"Function"		"LevelUpAbility"
				"ability_name"	"microphone_song_complete_stop"
			}
		}

		"Modifiers"
		{
			"modifier_song_of_the_siren_caster_datadriven"
			{
				"IsBuff"		"1"

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile"		"spell/microphone/microphone_song.lua"
						"Function"			"EndSinging"
						"sub_ability_name"	"microphone_song_complete_stop"
					}
				}

				"EffectName"			"particles/microphone/song_aura.vpcf"
				"EffectAttachType"		"attach_hitloc"		
				"EffectRadius"			"%radius"
			}

			"modifier_song_russe_song_aura"
			{
				"IsHidden"		"1"

				"Aura"			"modifier_song_russe_song"
				"Aura_Radius"	"%radius"
				"Aura_Teams"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
				"Aura_Types"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP | DOTA_UNIT_TARGET_BUILDING | DOTA_UNIT_TARGET_MECHANICAL"
				"Aura_Flags"	"DOTA_UNIT_TARGET_FLAG_INVULNERABLE"
			}

			"modifier_song_russe_song"
			{
				"Attributes"	"MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE"
				"IsDebuff"		"1"

				"States"
				{
					"MODIFIER_STATE_STUNNED"		"MODIFIER_STATE_VALUE_ENABLED"
				}

				"Properties"
				{
					"MODIFIER_PROPERTY_OVERRIDE_ANIMATION_RATE"		"%animation_rate"
				}
				
				"ThinkInterval"  "0.10"
				"OnIntervalThink"
				{
					"Rotate"
					{
						"Target"	"CASTER"
						"PitchYawRoll"	"0 10 0"
					}
				}

				"OverrideAnimation"		"ACT_DOTA_RUN"

				"EffectName"			"particles/units/heroes/hero_siren/naga_siren_song_debuff.vpcf"
				"EffectAttachType"		"follow_origin"
			}
			
			"modifier_song_sheep_aura"
			{
				"IsHidden"		"1"

				"Aura"			"modifier_song_sheep"
				"Aura_Radius"	"%radius"
				"Aura_Teams"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
				"Aura_Types"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP | DOTA_UNIT_TARGET_BUILDING | DOTA_UNIT_TARGET_MECHANICAL"
				"Aura_Flags"	"DOTA_UNIT_TARGET_FLAG_INVULNERABLE"
			}
			
			"modifier_song_sheep"
			{
				"Attributes"	"MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE"
				"IsDebuff"		"1"

				"OnCreated"
				{
					"RunScript"
					{
						"ScriptFile"	"spell/microphone/microphone_song.lua"
						"Function"		"voodoo_start"
						"Target"		"TARGET"
					}
				}
				"ThinkInterval"  "0.5"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile"	"spell/microphone/microphone_song.lua"
						"Function"		"voodoo_start"
						"Target"		"TARGET"
					}
				}
			}
			
			"modifier_song_dingdong_aura"
			{
				"IsHidden"		"1"

				"Aura"			"modifier_song_dingdong"
				"Aura_Radius"	"%radius"
				"Aura_Teams"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
				"Aura_Types"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_CREEP | DOTA_UNIT_TARGET_BUILDING | DOTA_UNIT_TARGET_MECHANICAL"
				"Aura_Flags"	"DOTA_UNIT_TARGET_FLAG_INVULNERABLE"
			}
			
			"modifier_song_dingdong"
			{
				"IsPurgable"		"0"
				"IsDebuff"			"1"

				"StatusEffectName" 		"particles/status_fx/status_effect_beserkers_call.vpcf" 	   
				"StatusEffectPriority"  "10"

				"ThinkInterval"  "0.1"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile"	"spell/microphone/microphone_song.lua"
						"Function"		"BerserkersCall"
					}
				}

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile"	"spell/microphone/microphone_song.lua"
						"Function"		"BerserkersCallEnd"
					}
				}
			}		
		}
	}
	
	"microphone_song_complete_stop"	
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_HIDDEN | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
		"AbilityType"					"DOTA_ABILITY_TYPE_ULTIMATE"
		"MaxLevel"						"3"
		"AbilityTextureName"			"custom/microphone_song_complete_stop"
		
		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastPoint"				"0 0 0"

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"1.0 1.0 1.0"

		// Data driven
		//-------------------------------------------------------------------------------------------------------------
		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile"			"spell/microphone/microphone_song.lua"
				"Function"				"CancelSinging"
			}

			"RemoveModifier"
			{
				"Target"				"CASTER"
				"ModifierName"			"modifier_song_of_the_siren_caster_datadriven"
			}

			"RemoveModifier"
			{
				"Target"				"CASTER"
				"ModifierName"			"modifier_song_of_the_siren_aura_datadriven"
			}

			"AttachEffect"
			{
				"EffectName"			"particles/units/heroes/hero_siren/naga_siren_siren_song_end.vpcf"
				"EffectAttachType"		"follow_origin"
				"Target"				"CASTER"
			}
		}

		"OnUpgrade"
		{
			"RunScript"
			{
				"ScriptFile"	"spell/microphone/microphone_song.lua"
				"Function"		"LevelUpAbility"
				"ability_name"	"naga_siren_song_of_the_siren_datadriven"
			}
		}
	}